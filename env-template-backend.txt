# Exbabel Backend Environment Variables
# Copy this to backend/.env and fill in your actual values

# ===================================
# API Keys (REQUIRED)
# ===================================

# OpenAI API Key (required for translation)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# Google Cloud Speech API Key (required for transcription)
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_SPEECH_API_KEY=your-google-api-key-here

# Alternative: Use Service Account JSON (more secure for production)
# Upload your service account JSON file and set this path:
# GOOGLE_APPLICATION_CREDENTIALS=/home/ubuntu/realtimetranslationapp/backend/google-credentials.json

# ===================================
# Google Cloud PhraseSet Configuration (Optional)
# ===================================
# PhraseSet improves recognition accuracy for specific terms (e.g., church glossary)
# 
# Setup:
# 1. Create PhraseSet in Google Cloud Console (Speech-to-Text > Adaptation)
# 2. Populate with: node backend/scripts/populatePhraseSet.js
# 3. Set these environment variables:
#
# Current Configuration:
# - API Version: v1p1beta1 (required for PhraseSet support)
# - Model: latest_long (enhanced Chirp 3)
# - Boost Value: 20 (maximum)
# - Phrase Count: 6,614 phrases
#
# See PHRASESET_FEATURE.md for complete documentation
#
# GOOGLE_CLOUD_PROJECT_ID=222662040787
# GOOGLE_PHRASE_SET_ID=church-glossary-10k

# ===================================
# Server Configuration
# ===================================

# Server port (default: 3001)
PORT=3001

# Node environment (development|production)
NODE_ENV=production

# ===================================
# WebSocket API Security Configuration
# ===================================

# API Keys for /api/translate WebSocket endpoint (comma-separated)
# Generate secure random keys (e.g., openssl rand -hex 32)
# Example: WS_API_KEYS=key1,key2,key3
WS_API_KEYS=

# Rate Limiting (Attack-Focused, Permissive for Legitimate Use)
# These limits are set 20-100x above normal usage to only block attacks

# Max connections per IP address (default: 50, allows multi-device usage)
WS_API_RATE_LIMIT_CONNECTIONS=50

# Max messages per second per connection (default: 1000, normal usage ~10-50/sec)
WS_API_RATE_LIMIT_MESSAGES=1000

# Max audio bytes per second per connection (default: 1048576 = 1MB, allows high-quality streaming)
WS_API_RATE_LIMIT_AUDIO=1048576

# Seconds of sustained high rate before enforcement (default: 5)
# Only enforces limits when abuse is clearly detected
WS_API_RATE_LIMIT_ADAPTIVE_THRESHOLD=5

# API WebSocket port (default: 5000, or same as PORT if not set)
# WS_API_PORT=5000

